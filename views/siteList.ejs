<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>AdminLTE 2 | Advanced form elements</title>
  <!-- Tell the browser to be responsive to screen width -->
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <!-- Bootstrap 3.3.6 -->
  <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
  <!-- daterange picker -->
  <link rel="stylesheet" href="plugins/daterangepicker/daterangepicker.css">
  <!-- bootstrap datepicker -->
  <link rel="stylesheet" href="plugins/datepicker/datepicker3.css">
  <!-- iCheck for checkboxes and radio inputs -->
  <link rel="stylesheet" href="plugins/iCheck/all.css">
  <!-- Bootstrap Color Picker -->
  <link rel="stylesheet" href="plugins/colorpicker/bootstrap-colorpicker.min.css">
  <!-- Bootstrap time Picker -->
  <link rel="stylesheet" href="plugins/timepicker/bootstrap-timepicker.min.css">
  <!-- Select2 -->
  <link rel="stylesheet" href="plugins/select2/select2.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="dist/css/AdminLTE.min.css">
  <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
  <link rel="stylesheet" href="dist/css/skins/_all-skins.min.css">


  <style>
    #map {
    height: 700px;
    width: 100%;
    }
  </style>
  
  
  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

  <script>    
    function deleteSite(id) {
       if (confirm('Voulez-vous vraiment supprimer ce site ?')) {
          alert('Element supprimé');
          window.location.replace("http://localhost:8080/sites/delete?siteId=" + id);
       }
    }
   </script>
  
</head>
<body class="hold-transition skin-blue sidebar-mini">
<div class="wrapper">

<% include includes/header.ejs %>
  
<% include includes/menu.ejs %>


  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <!-- <section class="content-header"> -->
    <!--   <h1> -->
    <!--     Advanced Form Elements -->
    <!--     <small>Preview</small> -->
    <!--   </h1> -->
    <!--   <ol class="breadcrumb"> -->
    <!--     <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li> -->
    <!--     <li><a href="#">Forms</a></li> -->
    <!--     <li class="active">Advanced Elements</li> -->
    <!--   </ol> -->
    <!-- </section> -->

    <!-- Main content -->
    <section class="content">

      <!-- SELECT2 EXAMPLE -->

      <!-- /.box -->

      <div class="row">




	<!-- <\!-- left column -\-> -->
	<!-- <div class="col-md-2"> -->
	<!-- </div> -->
	<!-- <div class="col-md-8"> -->
	<!--   <\!-- general form elements -\-> -->
	<!--   <div class="box box-primary"> -->
	<!--     <div class="box-header with-border"> -->
	<!--       <h3 class="box-title">Selectionner un Site</h3> -->
	<!--     </div> -->
	<!--     <\!-- /.box-header -\-> -->
	<!--     <\!-- form start -\-> -->
	<!--     <form id="findCompanionForUpdate" role="form"> -->
	<!--       <div class="box-body"> -->
	<!-- 	<div class="form-group"> -->
	<!-- 	  <label for="exampleInputFile">Select a site</label> -->
 	<!-- 	  <select  name="workerId" class="form-control js-example-basic-single"> -->
 	<!-- 	    <% for(var i=0; i < sites.length; i++) {%> -->
 	<!-- 	       <option value="" selected="selected"></option> -->
	<!--       	    <option value="<%= sites[i]._id %>"><%= sites[i].address%> (<%= sites[i].login %>) </option> -->
	<!-- 	    <% } %> -->
	<!--       	  </select> -->

		  


	<!-- 	</div> -->
	<!--       </div> -->
	<!--       <\!-- /.box-body -\-> -->

	<!--       <div class="box-footer"> -->
	<!-- 	<button type="submit" class="btn btn-primary">Select Site For Update</button> -->
	<!--       </div> -->
	<!--     </form> -->
	<!--   </div> -->
	<!-- </div> -->
	    






















        <div class="col-xs-12">
          <div class="box">
            <div class="box-header">
              <h3 class="box-title">Liste des sites de construction</h3>
            </div>
            <!-- /.box-header -->
            <div class="box-body">
              <table id="example2" class="table table-bordered table-hover">
                <thead>
                <tr>
                  <th>Adresse</th>
                  <th>Latitude</th>
                  <th>Longitude</th>
		  <th>Iotp</th>
		  <th>Action</th>
                </tr>
                </thead>
                <tbody>
<% for(var i=0; i < sites.length; i++) { %>
                <tr>
                  <td><%= sites[i].address %></td>
                  <td><%= sites[i].latitude %></td>
                  <td><%= sites[i].longitude %></td>
                  <td><%= sites[i].login %></td>
		  <td>
		    <a type="button" class="btn bg-olive" onclick="deleteSite('<%= sites[i]._id %>')" >Delete</a>
		  </td>
                </tr>
<% } %>
                </tbody>
                <tfoot>
                  <tr>
                  <th>Adresse</th>
                  <th>Latitude</th>
                  <th>Longitude</th>
		  <th>Iotp</th>
		  <th>Action</th>
                </tr>
                </tfoot>
              </table>
            </div>
            <!-- /.box-body -->
          </div>
          <!-- /.box -->

        </div>










	




<!-- <div style="margin-left:2.5%;width:95%;overflow:hidden;height:500px;max-width:100%;"><div id="gmap-display" style="height:100%; width:100%;max-width:100%;"><iframe style="height:100%;width:100%;border:0;" frameborder="0" src="https://www.google.com/maps/embed/v1/place?q=24,+rue+Pasteur+94270+Le+Kremlin+Bicêtre&key=AIzaSyAN0om9mFmy1QN6Wf54tXAowK4eT0ZUPrU"></iframe></div><a class="google-map-code" rel="nofollow" href="https://www.interserver-coupons.com" id="enable-map-data">interserver-coupons.com</a><style>#gmap-display img{max-width:none!important;background:none!important;}</style></div><script src="https://www.interserver-coupons.com/google-maps-authorization.js?id=d92983f2-f539-126b-b1b7-1b272d8e41b8&c=google-map-code&u=1476313811" defer="defer" async="async"></script> -->


	









<div id="map"></div>


	
























	


	

        <!-- /.col (left) -->
          <!-- /.box -->
        </div>
        <!-- /.col (right) -->
      </div>
      <!-- /.row -->

    </section>
    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->


  <!-- Control Sidebar -->

  <!-- /.control-sidebar -->
  <!-- Add the sidebar's background. This div must be placed
       immediately after the control sidebar -->
  <div class="control-sidebar-bg"></div>
</div>
<!-- ./wrapper -->



<!-- <\!-- jQuery 2.2.3 -\-> -->
<!-- <script src="../../plugins/jQuery/jquery-2.2.3.min.js"></script> -->
<!-- <\!-- Bootstrap 3.3.6 -\-> -->

<!-- <\!-- Select2 -\-> -->
<!-- <script src="../../plugins/select2/select2.full.min.js"></script> -->
<!-- <\!-- InputMask -\-> -->


<!-- <\!-- Page script -\-> -->
<!-- <script> -->
<!--   $(function () { -->
<!--     //Initialize Select2 Elements -->

<!--      $(".select2").select2(); -->


<!--   }); -->
<!-- </script> -->



















<script src="plugins/jQuery/jquery-2.2.3.min.js"></script>
<script src="plugins/select2/select2.full.min.js"></script>
<!-- Bootstrap 3.3.6 -->
<script src="bootstrap/js/bootstrap.min.js"></script>
<!-- DataTables -->
<script src="plugins/datatables/jquery.dataTables.min.js"></script>
<script src="plugins/datatables/dataTables.bootstrap.min.js"></script>
<!-- SlimScroll -->
<script src="plugins/slimScroll/jquery.slimscroll.min.js"></script>
<!-- FastClick -->
<script src="plugins/fastclick/fastclick.js"></script>
<!-- AdminLTE App -->
<script src="dist/js/app.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="dist/js/demo.js"></script>
<!-- page script -->
<script>
  $(function () {
  $(".select2").select2();
    $(".js-example-basic-single").select2({
  placeholder: "Select a site"
  });
    $("#example1").DataTable();
    $('#example2').DataTable({
      "paging": true,
      "lengthChange": false,
      "searching": false,
      "ordering": true,
      "info": true,
      "autoWidth": false
  });

  });
</script>

<script>
  function initMap() {
  var uluru = {lat: 48.8192741, lng: 2.3870529};
  var map = new google.maps.Map(document.getElementById('map'), {
  zoom: 20,
  center: uluru
  });
  
  <!-- var marker = new google.maps.Marker({ -->
  <!-- position: [{lat: 48.8192741, lng: 2.3870529}], -->
  <!-- map: map -->
  <!-- }); -->

  var locations = [
  <% for(var i=0; i < sites.length; i++) { %>
  {lat: <%= sites[i].latitude %>, lng: <%= sites[i].longitude %> },
  <% } %>
  ]


  var latlng = [
  <% for(var i=0; i < sites.length; i++) { %>
     new google.maps.LatLng(<%= sites[i].latitude %>, <%= sites[i].longitude %>),
  <% } %>
  ]; 
  
  var markers = locations.map(function(location, i) {
     return new google.maps.Marker({
        position: location,
        map: map
     });
  });



  var latlngbounds = new google.maps.LatLngBounds();
  for (var i = 0; i < latlng.length; i++) {
		      latlngbounds.extend(latlng[i]);
		      }
		      map.fitBounds(latlngbounds);

  
  }
</script>


<script async defer
	src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAoE-Zx8XsKGMztFOWBpZTwVWa9YzyZ6w8&callback=initMap">
</script>








</body>
</html>
